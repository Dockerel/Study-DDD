# 도메인 모델 시작하기

### 도메인이란?

개발자 관점의 정의: 소프트웨어로 해결하고자 하는 문제의 영역

- 한 도메인은 다시 하위 도메인으로 나눌 수 있다
- 도메인마다 고정된 하위 도메인이 존재하는건 아니다
- 하위 도메인을 어떻게 구성할지 여부는 상황에 따라 달라진다

> **도메인에 관련된 지식이 기반된 개발자일수록 요구사항을 올바르게 이해할 확률이 높아진다**
> 

### 도메인 모델

정의: 특정 도메인을 개념적으로 표현한 것

- 도메인을 이해하려면 도메인의 제공하는 기능과 도메인의 주요 데이터 구성을 파악해야 하는데, 이런 면에서 기능과 데이터를 함께 보여주는 **객체 모델** → 도메인을 모델링하기 적합하다
- 도메인 모델을 표현할 때 UML 표기법만을 사용해야하는 것은 아니다

### 도메인 모델 패턴

일반적인 애플리케이션의 아키텍처는 다음 4개의 영역으로 구성된다

- 표현 계층 - 사용자의 요청을 처리하고 사용자에게 정보를 보여준다
- 응용 계층 - 사용자가 요청한 기능을 실행한다. **도메인 계층을 조합해서 기능을 실행한다**
- 도메인 계층 - 시스템이 제공할 도메인 규칙을 구현한다
- 인프라 계층 - DB나 메시징 시스템같은 외부시스템과의 연동을 처리한다

> **도메인 계층에서 도메인 규칙을 객체 지향 기법으로 구현하는 패턴이 도메인 모델 패턴이다**
> 

### 엔티티와 밸류

엔티티의 가장 큰 특징 : **식별자**를 갖는다

밸류 타입 : 데이터를 표현하는 도구

- 밸류 타입은 꼭 두개 이상의 데이터를 가져야 하는 것은 아니다
- ex) 돈을 의미하는 int 자료형의 price를 아래와 같이 Money라는 밸류 타입으로 표현 가능하다
    
    ```jsx
    public class Money {
    	private int value;
    	
    	public Money(int value) {
    		this.value = value;
    	}
    ```
    
- 밸류 타입은 밸류 타이을 위한 기능을 추가할 수 있다는 장점도 가지고 있다
- 밸류 객체의 데이터를 변경할 때는 기존 데이터를 변경하기 보다는 변경한 데이터를 갖는 새로운 밸류 객체를 생성하는 방식을 선호한다
    
    ```jsx
    public class Money {
    	private int value;
    	
    	public Money add(Money money) {
    		return new Money(this.value + money.value);
    	}
    	
    	// value를 변경할 수 있는 메서드 없음.
    	// 만약, 존재한다면 참조 투명성과 관련한 문제 발생 가능.
    	// Money가 불변객체라면 해결 -> record 타입을 사용해도 좋을듯
    }
    ```
    

### get/set 메서드 습관적 사용 금지

1. 메서드 이름 자체가 가지고 있는 역할에 관한 의미가 사라진다
2. 도메인 객체를 생성할 때 온전하지 않은 상태가 될 수 있다
    
    ex) 필요한 인자를 모드 넣지 않고 객체를 생성하는 경우
    

cf) 밸류 타입은 불변으로 만드는게 추천되기 때문에 set을 사용할 이유가 없다

### 도메인 용어와 유비쿼터스 언어

도메인에서 사용되는 용어는 용어 자체로도 의미가 충분히 이해될 수 있도록 작성되어야 한다

ex) `STEP1, STEP2, STEP3, …` (x) / `PAYMENT_WAITING, PREPARING, …` (o)

- 유비쿼터스 언어 : 전문가, 관계자, 개발자가 도메인과 관련된 공통의 언어를 만들고 이를 모든 곳에서 사용하는 것
    
    → 소통 과정에서 발생하는 용어의 모호함을 줄일 수 있다
    
    → 개발자는 도메인과 코드 사이에서 불필요한 해석 과정을 줄일 수 있다
