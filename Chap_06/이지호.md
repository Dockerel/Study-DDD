### 응용 서비스의 역할

응용 서비스는 사용자가 요청한 기능을 실행한다

DDD관점에서는 리포지터리에서 애그리거트를 가져온다

응용 서비스가 복잡하다면? → 응용 서비스에서 도메인 로직의 일부를 구현하고 있을 가능성이 높다

→ 코드 중복, 로직 분산 등 코드 품질에 안좋은 영향을 줄 수 있다

응용 서비스는 트랜잭션 처리도 담당한다

### 도메인 로직 넣지 않기

도메인 로직을 도메인 영역과 응용 서비스에 분산해서 구현하면 코드 품질에 문제가 발생한다

1. 코드의 응집성이 떨어진다 : 도메인 데이터와 그 데이터를 조작하는 도메인 로직이 다른 영역에 위치하면 도메인 로직을 파악하기 위해 여러 영역을 분석해야 한다는 것을 의미한다
2. 여러 응용 서비스에서 동일한 도메인 로직을 구현할 가능성이 높아진다 : 코드 중복

### 응용 서비스의 구현

응용 서비스에서 생각할 거리 중 하나는 : 응용 서비스의 크기

→ 각 기능마다 동일한 로직을 반복하여 구현할 경우 여러 클래스에 중복해서 넣지 말고 별도 클래스를 두는 것이 좋다

응용 서비스를 구현할 때 논쟁이 될 만한 것이 인터페이스가 필요한 지에 관해서다 → 동의

인터페이스가 필요한 상황

- 구현 클래스가 여러개인 경우 → 하지만 드물고 런타임에 교체해야 하는 경우는 거의 없다
- TDD로 개발할 경우 구현이 존재하지 않기 때문에 인터페이스를 둔다
- 표현 영역의 단위 테스트를 위해 응용 서비스 클래스의 가짜 객체가 필요한 경우 → 그러나 Mock으로 대체 가능

응용 서비스에서 표현 영역에 대한 의존이 발생하면 안된다

→ 응용 서비스 단독으로만 테스트하기 어려워진다

→ 표현 영역의 구현이 변경되면 응용 서비스의 구현도 함께 변경해야한다

→ 무엇보다, 응용서비스가 표현 영역의 역할까지 대신하는 상황이 벌어질수도 있다

### 표현 영역

표현 영역의 책임은 크게

- 사용자가 시스템을 사용할 수 있는 흐름을 제공하고 제어
- 사용자의 요청을 알맞은 응용서비스에 전달하고, 결과를 사용자에게 제공
- 사용자의 세션을 관리

### 값 검증

값 검증은 표현 영역과 응용 서비스 두 곳에서 모두 수행할 수 있다

> 원칙적으로는 모든 값에 대한 검증은 응용 서비스에서 처리한다
> 

### 권한 검사

서블릿 필터에서 접근 제어가 가능하다

그러나, URL만으로 접근 제어를 할 수 없는 경우 응용서비스의 메서드 단위로 권한 검사를 수행해야 한다

ex) 스프링 시큐리티는 AOP를 활용해서 어노테이션으로 서비스 메서드에 대한 권한 검사를 할 수 있는 기능을 제공한다
